/*! neosavvy-javascript-core - v0.1.0 - 2013-09-29
* Copyright (c) 2013 Neosavvy, Inc.; Licensed  */
var Neosavvy=Neosavvy||{};Neosavvy.Core=Neosavvy.Core||{},Neosavvy.Core.Builders=Neosavvy.Core.Builders||{},Neosavvy.Core.Builders.CollectionBuilder=function(a){if(!a)throw"You must pass in a collection as the base upon which to build!";this.operations={},this.collection=a},Neosavvy.Core.Builders.CollectionBuilder.prototype={nest:function(a){if(_.isEmpty(a))throw"You must pass a valid propertyString to nest a collection.";return this.operations.nest=a,this},build:function(){if(_.keys(this.operations).length){var a=function(a,b){for(var c=b.split(".");c.length;){var d={};d[c.pop()]=a,a=d}return a};return _.map(this.collection,function(b){return this.operations.nest&&(b=a(b,this.operations.nest)),b},this)}return this.collection}};var Neosavvy=Neosavvy||{};Neosavvy.Core=Neosavvy.Core||{},Neosavvy.Core.Builders=Neosavvy.Core.Builders||{},Neosavvy.Core.Builders.RequestUrlBuilder=function(a){if(!a)throw"You must provide a base url for every request url built.";this.keyValues={},this.replacements={},this.baseUrl=a},Neosavvy.Core.Builders.RequestUrlBuilder.prototype={addParam:function(a,b){if("object"==typeof a){if(!Neosavvy.Core.Utils.MapUtils.keysDistinct(this.keyValues,a))throw"You have passed overlapping keys for object arguments.";this.keyValues=_.merge(this.keyValues,a)}else{if(!a||!b)throw"You must provide either a keyValue object, or a key value as arguments.";if(this.keyValues=this.keyValues||{},void 0!==this.keyValues[a])throw"You have attempted to overwrite an existing key value in the request url.";this.keyValues[a]=b}return this},paramReplace:function(a,b){if("object"==typeof a){if(!Neosavvy.Core.Utils.MapUtils.keysDistinct(this.replacements,a))throw"You have passed overlapping keys for object arguments.";this.replacements=_.merge(this.replacements,a)}else{if(!a||!b)throw"You must provide either a keyValue object, or a key value as arguments.";if(this.replacements=this.replacements||{},void 0!==this.replacements[a])throw"You have attempted to overwrite an existing key value in the request url.";this.replacements[a]=b}return this},build:function(){if(this.replacements)for(var a in this.replacements)this.baseUrl=this.baseUrl.replace(new RegExp(a,"g"),String(this.replacements[a]));if(this.keyValues){var b=0;for(var a in this.keyValues)this.baseUrl+=0===b?"?":"&",this.baseUrl+=a+"="+String(this.keyValues[a]),b++}return this.baseUrl}};var Neosavvy=Neosavvy||{};Neosavvy.Core=Neosavvy.Core||{},Neosavvy.Core.Builders=Neosavvy.Core.Builders||{},Neosavvy.Core.Builders.StringBuilder=function(a){if(!a)throw"Do not try to build a string with no input, it is pointless.";this.input=a,this.output=a},Neosavvy.Core.Builders.StringBuilder.prototype={camelToDash:function(){return this.output=this.output.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase(),this},constantToDash:function(){return this.output=this.output.replace(/_/g,"-").toLowerCase(),this},build:function(){return this.output}},function(a){"use strict";a.memoize||(a.memoize="object"==typeof JSON&&"function"==typeof JSON.stringify?function(a){var b=JSON.stringify,c={},d=function(){var d=b(arguments);return d in c?c[d]:c[d]=a.apply(this,arguments)};return d.__cache=function(){return c.remove||(c.remove=function(){var a=b(arguments);return delete c[a]}),c}.call(this),d}:function(a){return a})}(this),function(a,b){if(!b||!memoize)throw"Either Lodash or global memoize has not been loaded within this application. Please load these files before cached-lodash.js";a._cached=a._cached||{};for(var c in b)"memoize"!==c&&(a._cached[c]=memoize(b[c]))}(window,window._);var Neosavvy=Neosavvy||{};Neosavvy.Core=Neosavvy.Core||{},Neosavvy.Core.Utils=Neosavvy.Core.Utils||{},Neosavvy.Core.Builders=Neosavvy.Core.Builders||{};var Neosavvy=Neosavvy||{};Neosavvy.Core=Neosavvy.Core||{},Neosavvy.Core.Utils=Neosavvy.Core.Utils||{},Neosavvy.Core.Utils.CollectionUtils=function(){return{itemByProperty:function(a,b,c){if(a&&a.length&&c)for(var d=0;d<a.length;d++){var e=Neosavvy.Core.Utils.MapUtils.get(a[d],b);if(e===c)return a[d]}return null},updateByProperty:function(a,b,c){if(a&&a.length&&b&&b[c]&&c)for(var d=0;d<a.length;d++)if(void 0!=a[d]&&null!=a[d]&&a[d][c]===b[c]){a[d]=b;break}},removeByProperty:function(a,b,c){if(a&&a.length&&b&&b[c]&&c)for(var d=0;d<a.length;d++)if(void 0!=a[d]&&null!=a[d]&&a[d][c]===b[c]){a.splice(d,1);break}},uniqueMap:function(a,b){var c={};if(a&&a.length)for(var d=0;d<a.length;d++)c[String(Neosavvy.Core.Utils.MapUtils.get(a[d],b))]=a[d];return c},containMatchByProperty:function(a,b,c){if(a&&b&&a.length&&b.length)for(var d=b.map(function(a){return a[c]}),e=0;e<a.length;e++)if(-1!=d.indexOf(a[e][c]))return!0;return!1},collectionContainsAllOtherItems:function(a,b,c){if(a&&a.length&&b&&b.length){for(var d=a.map(function(a){return a[c]}),e=0;e<b.length;e++)if(-1==d.indexOf(b[e][c]))return!1;return!0}return!1},containsExclusively:function(a,b){if(a&&b){for(var c=0;c<a.length;c++)if(-1===b.indexOf(a[c]))return!1;for(var c=0;c<b.length;c++)if(-1===a.indexOf(b[c]))return!1;return!0}return!1}}}();var Neosavvy=Neosavvy||{};Neosavvy.Core=Neosavvy.Core||{},Neosavvy.Core.Utils=Neosavvy.Core.Utils||{},Neosavvy.Core.Utils.DateUtils=function(){var a=864e5;return{DAY_IN_MILLISECONDS:a,sameDay:function(b,c){return b&&c&&b.getDay()==c.getDay()?b.getTime()>=c.getTime()-a&&b.getTime()<=c.getTime()+a:!1},daysFromNow:function(a){return new Date((new Date).getTime()+864e5*a)}}}();var Neosavvy=Neosavvy||{};Neosavvy.Core=Neosavvy.Core||{},Neosavvy.Core.Utils=Neosavvy.Core.Utils||{},Neosavvy.Core.Utils.DomUtils=function(){return{getElementsByAttribute:function(a,b,c){for(var d=[],e=document.getElementsByTagName(a),f=0;f<e.length;f++)e[f].getAttribute(b)==c&&d.push(e[f]);return d}}}();var Neosavvy=Neosavvy||{};Neosavvy.Core=Neosavvy.Core||{},Neosavvy.Core.Utils=Neosavvy.Core.Utils||{},Neosavvy.Core.Utils.MapUtils=function(){return{get:function(a,b){if(a&&b)for(b=b.split(".");b.length&&a;)a=a[b.shift()];return a},keysDistinct:function(){if(arguments.length>1){for(var a=0,b=0;b<arguments.length;b++)a+=_.keys(arguments[b]).length;return _.keys(_.merge.apply(this,arguments)).length===a}return!0}}}();var Neosavvy=Neosavvy||{};Neosavvy.Core=Neosavvy.Core||{},Neosavvy.Core.Utils=Neosavvy.Core.Utils||{},Neosavvy.Core.Utils.NumberUtils=function(){return{asOrdinal:function(a){var b=["th","st","nd","rd"],c=Math.abs(a)%100;return a+(b[(c-20)%10]||b[c]||b[0])},round:function(a,b){if(void 0!==a&&null!==a){var c=String(Math.round(parseFloat(a)*Math.pow(10,b)));return b?c.slice(0,c.length-b)+"."+c.slice(c.length-b,c.length):c}return a},roundUpIfFloat:function(a){var b=Math.abs(a);return b-parseInt(b)>0?parseInt(a)+(0>a?-1:1):a},leadingZeroes:function(a,b){if(void 0!=a&&null!=a){(void 0==b||null==b)&&(b=2);var c=String(a),d="-"==c.charAt(0);d&&(c=c.slice(1));var e=c.split(".");for(2==e.length&&(c=e[0]);c.length<b;)c="0"+c;return 2==e.length&&(c+="."+e[1]),d?"-"+c:c}return a}}}();var Neosavvy=Neosavvy||{};Neosavvy.Core=Neosavvy.Core||{},Neosavvy.Core.Utils=Neosavvy.Core.Utils||{},Neosavvy.Core.Utils.RegexUtils=function(){var a=/^\s*[\w\-\+_]+(\.[\w\-\+_]+)*\@[\w\-\+_]+\.[\w\-\+_]+(\.[\w\-\+_]+)*\s*$/;return{matchStringAndLeadup:function(a){if(!_.isEmpty(a)){a=String(a);for(var b="",c=0;c<a.length;)b+="^"+a.slice(0,c+1)+"$",c<a.length-1&&(b+="|"),c++;return new RegExp(b.replace(/([.?*+[\]\\(){}-])/g,"\\$1"),"i")}return void 0},isEmail:function(b){return void 0!==b&&null!==b?-1!=String(b).search(a):!1}}}();var Neosavvy=Neosavvy||{};Neosavvy.Core=Neosavvy.Core||{},Neosavvy.Core.Utils=Neosavvy.Core.Utils||{},Neosavvy.Core.Utils.RequestUrlUtils=function(){function a(a,b,c){if(a&&null!=a&&null!=b&&""!=b&&null!=c&&""!=c){var d=b.toString()+"="+c.toString();a+=-1==a.indexOf("?")?"?"+d:"&"+d}return a}function b(a){if(a&&null!=a){var b=Object.keys(a);if(null!=b&&b.length)return b[0]}return null}return{addParams:function(c,d){if(c&&null!=c&&null!=d&&d.length)for(var e=0;e<d.length;e++){var f=d[e],g=b(f);c=a(c,g,f[g])}return c},addParam:function(b,c,d){return a(b,c,d)},replaceParam:function(a,b,c){if(null!=a&&null!=b&&null!=c){var d=a.split("?");if(2==d.length){for(var e=!1,f=d[1].split("&"),g=0;g<f.length;g++)if(-1!=f[g].indexOf(b+"=")){f[g]=b.toString()+"="+c.toString(),e=!0;break}if(e){a=d[0]+"?";for(var g=0;g<f.length;g++)a+=f[g],g<f.length-1&&(a+="&")}}return a}return null}}}();var Neosavvy=Neosavvy||{};Neosavvy.Core=Neosavvy.Core||{},Neosavvy.Core.Utils=Neosavvy.Core.Utils||{},Neosavvy.Core.Utils.SpecialUtils=function(){return{keepTrying:function(){function a(){if(arguments.length){if(0!==arguments.length%2)throw"Keep trying requires an event number of arguments. Even indices are functions and odd indices are arrays or empty arrays of their arguments!";try{return arguments[0].apply(this,arguments[1])}catch(b){return a.apply(this,Array.prototype.slice.call(arguments,2))}}return null}return a.apply(this,arguments)}}}();var Neosavvy=Neosavvy||{};Neosavvy.Core=Neosavvy.Core||{},Neosavvy.Core.Utils=Neosavvy.Core.Utils||{},Neosavvy.Core.Utils.StringUtils=function(){var a=/^\s*$/;return{htmlAttributeSafe:function(a){if(null!=a){for(var b="     ";" "!=b;)a=a.replace(b," "),b=b.slice(0,b.length-1);return a.replace(/(_\s|\s_|\s)/g,"_").replace(/([^a-zA-Z0-9_])/g,"").toLowerCase()}return null},truncate:function(a,b,c){return void 0==c&&(c=!0),a&&null!=a&&a.length>b&&(a=a.slice(0,b).trim(),c&&(a+="...")),a},isBlank:function(b){return!b||a.test(b)},replaceIfExistsAtIndex:function(a,b,c,d){return a&&void 0!=b&&null!=b&&void 0!=c&&null!=c&&d>=0&&a[d]==b?a.substr(0,d)+c+a.substr(d+c.length+1):a},properCase:function(a){return a?a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}):""},remove:function(a){if(a&&arguments.length>1){a=String(a);for(var b=1;b<arguments.length;b++)a=a.replace(new RegExp(arguments[b],"g"),"")}return a}}}();